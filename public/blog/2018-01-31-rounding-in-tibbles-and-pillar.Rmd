---
title: Rounding in tibbles and pillar
author: Martin John Hadley
date: '2018-01-31'
slug: rounding-in-tibbles-and-pillar
categories:
  - R
  - tidyverse
tags:
  - tidyverse
draft: true
publishdate: "2018-03-01"
---

Tibble column chopping is a thing https://twitter.com/dataandme/status/956316981690585090

I got a question from yup Chenzi Xu <chenzi.xu@seh.ox.ac.uk>

Issue: https://github.com/r-lib/pillar/issues/93

There are good options for controlling these https://www.tidyverse.org/articles/2018/01/tibble-1-4-2/?utm_content=buffer418b3&utm_medium=social&utm_source=twitter.com&utm_campaign=buffer

But should there be an option for turning off rounding?

```{r}
library("tidyverse")

string_numbers <- tibble(
  id = 1:5,
  na.and.both = c("100.49", "200", "300", "400.51", NA),
  both.types = c("100.49", "200", "300", "400.51", "500"),
  all.integers = c("100", "200", "300", "400", "500"),
  all.doubles = c("100.494", "200.494", "300.514", "400.514", "500.514"),
  bigger.decimals = c("121.3444", "2232.444", "343.3424", "4424.4344", "5453.33")
)

chenzi_data <- tibble(
  id = 1:5,
  pitch = c("275.480", "230", "240.0", "402.33", NA),
  all.decimal = c("230.1", "101.3", "707.2", "5905.3", "56.1")
)

options(pillar.sigfig = 3)

chenzi_data %>%
  mutate(pitch = parse_double(pitch, locale = locale(decimal_mark = ".")))


strings_parsed <- string_numbers %>%
  mutate(parse_number.na.and.both = parse_number(na.and.both),
         parse_number.both.types = parse_number(both.types),
         parse_number.all.integers = parse_number(all.integers),
         parse_number.all.doubles = parse_number(all.doubles)) %>%
  mutate(parse_double.na.and.both = parse_number(na.and.both),
         parse_double.both.types = parse_double(both.types),
         parse_double.all.integers = parse_double(all.integers),
         parse_double.all.doubles = parse_double(all.doubles)) %>%
  mutate(parse_number.bigger.decimals = parse_number(bigger.decimals))
```

MAKE A GITHUB ISSUE ABOUT THIS