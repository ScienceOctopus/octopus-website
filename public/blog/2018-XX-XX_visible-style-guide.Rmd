---
title: Reproducible Blogposts
author: Martin John Hadley
date: '2018-02-07'
slug: reproducible-blogposts
categories:
  - meta
tags:
  - meta
draft: no
description: >
  <ul>
  <li>hi</li>
  <li>please</li>
  </ul>
editor_options: 
  chunk_output_type: console
banner: "img/blog-images/header-images/2018-02-07_where-s-the-love-for-htmlwidgets_header-image.png"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
```

<!--html_preserve-->
<hr style="margin-top: -10px;margin-bottom: 5px;">
<div class="row">
    <div class="col-xs-4">
        <center> <span class="fa fa-star fa-2x text-center" style="color:Tomato"></span>
            <p>Citable Author
                <br>
                <a href="https://orcid.org/0000-0002-3039-6849" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="/img/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0002-3039-6849</a>
        </center>
    </div>
    <div class="col-xs-4">
        <center> <span class="fa fa-star-half fa-2x text-center" style="color:Tomato"></span>
            <p> Citable Data
                <br>
                <a href="https://www.kaggle.com/stackoverflow/rquestions" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="/img/doi_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">Kaggle Dataset</a>
        </center>
    </div>
    <div class="col-xs-4">
        <center> <span class="fa fa-star-half fa-2x text-center" style="color:Tomato"></span>
            <p> Citable Code
                <br>
                <a href="https://www.kaggle.com/stackoverflow/rquestions" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="/img/GitHub-Mark-32px.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">.Rmd on GitHub</a>
        </center>
    </div>
</div>
<hr style="margin-top: 5px;margin-bottom: 5px;">
<!--/html_preserve-->

Writing blogposts that meet all four of these requirements is hard:

- The post is interesting and has something unique to it
- The post is easy to understand and both analyses and data visualisations follow sensible best practices
- The code is fully reproducible with all datasets available programmatically to folks replicating the code
- The author doesn't give up writing because one of these can't easily be met

In an ideal world, datasets are provided with DOI and/or else easily accessible via an API. If we're really lucky there'll be a lovely R package that wraps up the API for us; as is the case for the excellent `WDI` package that makes the World Bank data available to us. Here's a nice example of how we can reproducibly obtain and tabulate data using `WDI` and `DT`:

```{r uneval-internet-users, eval=FALSE}
library("WDI")
library("tidyverse")
library("DT")

WDI(country=c("DE","NZ"), indicator="IT.NET.USER.ZS", start=2000, end=2001) %>%
  mutate(IT.NET.USER.ZS = IT.NET.USER.ZS / 100) %>%
  datatable(colnames = c("Country Short Code",
                         "Country",
                         "Individuals using the Internet (% of population)",
                         "Year"),
            options = list(dom = "t")) %>%
  formatPercentage(columns = 'IT.NET.USER.ZS')
```

```{r hidden-internet-users, echo=FALSE}
## This code chunk will not appear in the published blogpost
## The widgetframe library is used to ensure htmlwidgets play nice in the website.
library("WDI")
library("tidyverse")
library("DT")
library("widgetframe")

dt_internet_users <- WDI(country=c("DE","NZ"), indicator="IT.NET.USER.ZS", start=2000, end=2001) %>%
  mutate(IT.NET.USER.ZS = IT.NET.USER.ZS / 100) %>%
  datatable(colnames = c("Country short code",
                         "Country",
                         "% of pop using the internet",
                         "Year"),
            options = list(dom = "t")) %>%
  formatPercentage(columns = 'IT.NET.USER.ZS')
frameWidget(dt_internet_users)
```

Oftentimes, unfortunately we can't access data programmatically. [Kaggle datasets](https://www.kaggle.com/datasets) are a frustrating example of this, there are some really exciting and vibrant datasets published there but  


Look at this mess!


<div class="row">

<div class="col-sm-6">

<center>
<img src='/img/blog-images/2018-02-09_unordered-legend.jpg' width='100%' style='max-width:380px'/>
</center>

</div>

<div class="col-sm-6">

<center>
<img src='/img/blog-images/2018-02-09_ordered-legend.png' width='100%' style='max-width:380px'/>
</center>

</div>

</div>


Hey

Styles are important! One of my early blogposts was [fairly popular](https://twitter.com/martinjhnhadley/status/961316049164685312) but I just after I'd promoted it that the legend order was bad!

- Compare original to current

So I decided to [create a style guide](https://twitter.com/martinjhnhadley/status/961723207014379525).

# Checklist

- Check all code chunks have names
- Check all legends are sensibly ordered
- Check Twitter handles in Markdown links have been escaped, i.e. \[\@martinjhnhadley\] 

# Have to add a description for each blogpost

https://yihui.name/en/2017/08/hugo-post-summary/


