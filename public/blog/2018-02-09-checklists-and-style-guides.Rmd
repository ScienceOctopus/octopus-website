---
title: Checklists and style guides
author: Martin John Hadley
date: '2018-02-09'
slug: checklists-and-style-guides
categories:
  - meta
tags:
  - meta
draft: yes
description: "I now have a description"
---

<!--html_preserve-->
<hr style="margin-top: -10px;margin-bottom: 5px;">
<div class="row">
    <div class="col-sm-4">
        <center> <span class="fa fa-star fa-2x text-center" style="color:Tomato"></span>
            <p><a href='/blog/2018/02/07/2018-xx-xx_reproducible-blogposts/#reproducability-ratings' data-toggle="tooltip" data-placement="right" title="" data-original-title="Click for info" style='font-weight:bold;color:black;text-decoration:underline;' target='_blank'>Citable Author<i class="fa fa-question-circle "></i></a>
                <br>
                Martin John Hadley
                <br>
                (<a href="https://orcid.org/0000-0002-3039-6849" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"  target='_blank'><img src="/img/orcid_16x16.png" style="width:1em;margin-right:.2em;" alt="ORCID iD icon">orcid.org/0000-0002-3039-6849</a>)
        </center>
    </div>
    <div class="col-sm-4">
        <center> <span class="fa fa-star fa-2x text-center" style="color:Tomato"></span>
            <p><a href='/blog/2018/02/07/2018-xx-xx_reproducible-blogposts/#reproducability-ratings' data-toggle="tooltip" data-placement="right" title="" data-original-title="Click for info" style='font-weight:bold;color:black;text-decoration:underline;' target='_blank'>Citable Data<i class="fa fa-question-circle "></i></a>
                <br>
                None used.
        </center>
    </div>
    <div class="col-sm-4">
        <center> <span class="fa fa-star-half-o fa-2x text-center" style="color:Tomato"></span>
            <p><a href='/blog/2018/02/07/2018-xx-xx_reproducible-blogposts/#reproducability-ratings' data-toggle="tooltip" data-placement="right" title="" data-original-title="Click for info" style='font-weight:bold;color:black;text-decoration:underline;' target='_blank'>Citable Code<i class="fa fa-question-circle "></i></a>
                <br>
                <a href="https://www.kaggle.com/stackoverflow/rquestions" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"  target='_blank'><img src="/img/GitHub-Mark-32px.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">.Rmd on GitHub</a>
        </center>
    </div>
</div>

<hr style="margin-top: 5px;margin-bottom: 5px;">

<!--/html_preserve-->

Writing reproducible code is hard. Ensuring code is legible and easy to understand is another feat in itself. That's why it's important for folks to follow well established code style guides whether developing packages, writing single use code or even blogposts. As I insist on teaching best practices in all my training courses, it would be remiss of me not to follow my own advice when writing for this blog and elsewhere. This post has a [pre-publication checklist at the bottom](#prepublication-checklist) that I run through before publishing (or at least promoting content!), it's split into the following sections:

- Code Style Guides
- Data Visualisation Style Guides
- Accessibility Style Guides

## Code Style Guides

In the #rstats community there's pretty much a defacto coding standard, the code styles of RStudio which have recently been officially named the [tidyverse style guide](http://style.tidyverse.org/). Listing all of the myriad rules and best practices from the style guide is not only tedious it's really difficult to apply these rules ourselves to script files that are 100+ lines of code. Thankfully there are two awesome tools developed by RStudio that help make our lives easier:

<div class="row">

<div class="col-sm-6">

- `styler`: effectively all this package does is re-indent your code files to conform to the **tidyverse style guide**. Install the package by running `install.packages("styler")` in your console. This will also install a number of Addins to RStudio ([What are Addins?](https://rstudio.github.io/rstudioaddins/)) that can be used as shown in this GIF taken from the [https://github.com/r-lib/styler](https://github.com/r-lib/styler) repository.

</div>

<div class="col-sm-6">

<img src='/img/blog-images/2018-02-09_styler-reindent.gif' width='100%'></img>

</div>

</div>

<br>

<div class="row">

<div class="col-sm-6">

- `lintr`: analyses your code for non-conformity to the **tidyverse style guide** and provides advice on changes you should make. As of early February 2018, the CRAN-hosted version of the package does *not* have the RStudio Addins. I'm using the development version which is installed using `devtools::install_github("jimhester/lintr")`. The `lintr` Addin can then be used on **saved** files, including .Rmd files ðŸ˜„

</div>

<div class="col-sm-6">

<img src='/img/blog-images/2018-02-09_lintr-suggestions.png' width='100%'></img>

</div>

</div>

Excitingly, RStudio are currently overhauling the error messages in their packages to confirm to the highly aspirational [tidyverse error message style guide](http://style.tidyverse.org/error-messages.html). Why is this exciting? Well, there's an emphasis on providing concise **human readable** errors which should make it much easier to spot where and what errors are. 

        ## Old error message
        tibble(x = 1:2, y = 1:3, z = 1)
        #> Error: Column `x` must be length 1 or 3, not 2 
        
        ## New error message
        tibble(x = 1:2, y = 1:3, z = 1)
        #> Error: Columns must have consistent lengths: 
        #> * Column `x` has length 2
        #> * Column `y` has length 3

When I'm developing my own packages I'll also follow these guidelines, but these are the only items I'll add to my checklist from the tidyverse style guide:

<span class="fa fa-check-circle fa text-center" style="color:#62b97f"></span> Run the `styler` RStudio Addin on code chunks before publishing content
<br>
<span><span class="fa fa-check-circle fa text-center" style="color:#62b97f"></span> Run the `lintr` RStudio Addin on .Rmd files before publishing and correct all non-conformities</span>

Unfortunately, there are some things that the tidyverse style guide doesn't include that we really should consider when publishing RMarkdown files.

<span><span class="fa fa-check-circle fa text-center" style="color:#62b97f"></span> Name every single code chunk to assist in debugging</span>
<br>
<span><span class="fa fa-check-circle fa text-center" style="color:#62b97f"></span> Where code chunks have the option `include=FALSE` ensure a comment is included to explain why.</span>

## Data Visualisation Style Guides

I'm a co-founder of the [oxshef: dataviz initiative](http://oxshef.netlify.com), which promotes and supports the use of interactive visualisations for communicating research datasets and outputs. One of the core goals of the initiative is to advise researchers on the best data visualisation choice for their data, and to avoid common pitfalls in designing dataviz through our [oxshef: charts](http://oxshef-charts.netlify.com/) site.

There are quite a few *accepted wisdoms* in the field of dataviz, but it's good to take some of them with a pinch of salt:

- Never use a rainbow colour scheme. Actually, this one doesn't need any salt. It's [always](https://eagereyes.org/basics/rainbow-color-map) a [bad idea](https://www.poynter.org/news/why-rainbow-colors-arent-best-option-data-visualizations) to use rainbow colour schemes, [#endtherainbow](https://twitter.com/hashtag/endtherainbow?lang=en) colour scheme.

- All pie charts can and **should** be replaced with bar charts. Though, there are some ways that [pie charts can be improved](https://eagereyes.org/papers/a-pair-of-pie-chart-papers) and graphical perception theory explanations of why pie charts are bad [might not be reliable](https://eagereyes.org/pie-charts).

- [Chart junk should be reduced at all costs](http://www.infovis-wiki.net/index.php/Chart_Junk) has been recommended by experts since Edward Tufte in the 1980s. Modern charting guides have pulled back in a few directions when it comes to minimalism, with the introduction of [direct labeling](https://twitter.com/jburnmurdoch/status/955812335809122304) amongst other recommendations.

I'm not going to transplant all of the advice from [oxshef: charts](http://oxshef-charts.netlify.com/) to this blogpost, as that would be ridiculous. Instead I'll add a few explicit items to my personal style guide:

<span class="fa fa-check-circle fa text-center" style="color:#62b97f"></span> If not direct labeling, order legends so 

<div class="row">

<div class="col-sm-6">

<center>
<img src='/img/blog-images/2018-02-09_unordered-legend.jpg' width='100%' style='max-width:380px'/>
</center>

</div>

<div class="col-sm-6">

<center>
<img src='/img/blog-images/2018-02-09_ordered-legend.png' width='100%' style='max-width:380px'/>
</center>

</div>

</div>

Styles are important! One of my early blogposts was [fairly popular](https://twitter.com/martinjhnhadley/status/961316049164685312) but I just after I'd promoted it that the legend order was bad!

- Compare original to current

So I decided to [create a style guide](https://twitter.com/martinjhnhadley/status/961723207014379525).

## Accessibility Style Guides

https://accessibility.blog.gov.uk/2016/09/02/dos-and-donts-on-designing-for-accessibility/

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Iâ€™m a blind twitter user. There are a lot of us out there. Increase your ability to reach us and help us interact with your pictures, itâ€™s really simple and makes a huge difference to our twitter experiance allowing us to see your images our way. Thanks for the description ðŸ˜Ž <a href="https://t.co/hCsjoFdmev">pic.twitter.com/hCsjoFdmev</a></p>&mdash; Rob Long (@_Red_Long) <a href="https://twitter.com/_Red_Long/status/948577112860086272?ref_src=twsrc%5Etfw">January 3, 2018</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


The Hugo Theme currently used by the blog is the [devcows/hugo-universal-theme](https://github.com/devcows/hugo-universal-theme) which is largely well designed and supports mobile devices thanks to Boostrap. Bootstrap is a framework for building responsive web pages, content **reflows** as the browser window changes in size. This means a lot of work has been done for me on making the site accessible. 

However, the default font size of 14px for text in the site does not adhere to current ideas about 

The default font size of the devcows theme is too small for readability.

I switched it up to 16x.

 Checklist

- Check all code chunks have names
- Check all legends are sensibly ordered
- Check Twitter handles in Markdown links have been escaped, i.e. \[\@martinjhnhadley\] 

## Pre-publication Checklist {#prepublication-checklist}

<!--html_preserve-->

<div class="row">

<div class="col-sm-6 col-lg-4">

<h4>Code Checks</h4>

<span class="fa fa-check-circle fa text-center" style="color:#62b97f"></span> Run the `styler` RStudio Addin on code chunks before publishing content
<br>
<span><span class="fa fa-check-circle fa text-center" style="color:#62b97f"></span> Run the `lintr` RStudio Addin on .Rmd files before publishing and correct all non-conformities</span>

</div>

<div class="col-sm-6 col-lg-4">

<h4>Data Viz Checks</h4>

<span class="fa fa-check-circle fa text-center" style="color:#62b97f"></span> Run the `styler` RStudio Addin on code chunks before publishing content
<br>
<span><span class="fa fa-check-circle fa text-center" style="color:#62b97f"></span> Run the `lintr` RStudio Addin on .Rmd files before publishing and correct all non-conformities</span>

</div>

<div class="col-sm-12 col-lg-4">

<h4>Accessibility Checks</h4>

<span class="fa fa-check-circle fa text-center" style="color:#62b97f"></span> Spelling and Grammar check
<br>
<span class="fa fa-check-circle fa text-center" style="color:#62b97f"></span> Run the `styler` RStudio Addin on code chunks before publishing content
<br>
<span><span class="fa fa-check-circle fa text-center" style="color:#62b97f"></span> Run the `lintr` RStudio Addin on .Rmd files before publishing and correct all non-conformities</span>

</div>

</div>

<!--/html_preserve-->

